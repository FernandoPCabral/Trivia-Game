(this["webpackJsonptrivia-test"]=this["webpackJsonptrivia-test"]||[]).push([[0],{104:function(e,t){},105:function(e,t,a){},106:function(e,t,a){},107:function(e,t,a){},108:function(e,t,a){},141:function(e,t){},150:function(e,t,a){},154:function(e,t,a){},155:function(e,t,a){},156:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(38),s=a.n(c),o=(a(96),a(9)),i=a(17),l=a(7),u=a(8),m=a(11),p=a(10),d=(a(41),a(3)),h=a(39),f=a(2),y=a.n(f),g=a(14),b=a(87),v=a.n(b),E=a(6),O=function(e){return{type:"PLAYER_INFO",payload:Object(E.a)({},e)}},k=function(e){return{type:"TOKEN_INFO",payload:"".concat(e)}},j=function(e){return{type:"TIMER",payload:e}},w=function(e){return{type:"ADD_SCORE",payload:{score:e}}},N=function(e){return{type:"ADD_CATEGORY",payload:e}},C=function(e){return{type:"ADD_DIFFICULTY",payload:e}},S=function(e){return{type:"ADD_TYPE",payload:e}},x=a(22),A=a(26),T=a.n(A),D=function(){var e=Object(g.a)(y.a.mark((function e(){var t,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://opentdb.com/api_token.php?command=request");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a.token);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(g.a)(y.a.mark((function e(t,a,n,r){var c,s,o,i,l,u,m;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),c="https://opentdb.com/api.php?amount=5&category=".concat(a,"&difficulty=").concat(n,"&type=").concat(r,"&token=").concat(t),e.next=4,fetch(c);case 4:return s=e.sent,e.next=7,s.json();case 7:if(o=e.sent,console.log(o),0!==o.results.length){e.next=24;break}return console.log("entrou"),e.next=13,D();case 13:return i=e.sent,console.log(i),l="https://opentdb.com/api.php?amount=5&category=".concat(a,"&difficulty=").concat(n,"&type=").concat(r,"&token=").concat(i),console.log(l),e.next=19,fetch(l);case 19:return u=e.sent,e.next=22,u.json();case 22:return m=e.sent,e.abrupt("return",m);case 24:return e.abrupt("return",o);case 25:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),I=function(e,t){localStorage.setItem(e,JSON.stringify(t))},R=function(){var e=Object(g.a)(y.a.mark((function e(){var t,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://opentdb.com/api_category.php",e.next=3,fetch("https://opentdb.com/api_category.php");case 3:return t=e.sent,e.next=6,t.json();case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=(a(105),function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={name:"",email:"",disabled:!0},e.enableButton=Object(g.a)(y.a.mark((function t(){var a,n,r;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:4,a=e.state,n=a.email,r=a.name,n.includes("@")&&n.includes(".com")&&r.length>=4?e.setState({disabled:!1}):e.setState({disabled:!0});case 4:case"end":return t.stop()}}),t)}))),e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(h.a)({},n,r),(function(){return e.enableButton()}))},e.handleClick=Object(g.a)(y.a.mark((function t(){var a,n,r,c,s,o,i;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D();case 2:a=t.sent,n=e.props,r=n.dispatch,c=n.history,s=e.state,o=s.name,i=s.email,r(O({name:o,email:i})),r(k(a)),I("token",a),c.push("/game");case 9:case"end":return t.stop()}}),t)}))),e.handleClickSettings=Object(g.a)(y.a.mark((function t(){var a,n,r,c,s,o,i;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D();case 2:a=t.sent,n=e.props,r=n.dispatch,c=n.history,s=e.state,o=s.name,i=s.email,r(O({name:o,email:i})),r(k(a)),I("token",a),c.push("/settings");case 9:case"end":return t.stop()}}),t)}))),e}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.disabled,n=t.email,c=t.name;return r.a.createElement("div",{className:"login-container"},r.a.createElement("img",{src:v.a,className:"App-logo",alt:"logo"}),r.a.createElement("form",{className:"login-form"},r.a.createElement("input",{className:"form-inputs",value:c,name:"name",type:"text",placeholder:"Nome","data-testid":"input-player-name",onChange:function(t){return e.handleChange(t)}}),r.a.createElement("input",{className:"form-inputs",value:n,name:"email",type:"email",placeholder:"Email","data-testid":"input-gravatar-email",onChange:function(t){return e.handleChange(t)}}),r.a.createElement("button",{className:"form-play button-login",onClick:this.handleClick,disabled:a,type:"button","data-testid":"btn-play"},"Play"),r.a.createElement("button",{onClick:this.handleClickSettings,disabled:a,className:"settings-btn button-login form-settings","data-testid":"btn-settings",type:"button"},"Settings")))}}]),a}(r.a.Component)),L=Object(o.b)()(Q),M=a(32),B=a.n(M),q=(a(106),function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.name,a=e.gravatarEmail,n=e.score;return r.a.createElement("header",null,r.a.createElement("div",{className:"name-img-div"},r.a.createElement("h4",{className:"name-header","data-testid":"header-player-name"},t),r.a.createElement("img",{"data-testid":"header-profile-picture",src:"https://www.gravatar.com/avatar/".concat(T()(a)),alt:"GravatarImg",className:"gravatarImg"})),r.a.createElement("div",{className:"score-header"},r.a.createElement("p",null,"Score: "),r.a.createElement("p",{"data-testid":"header-score"},n)))}}]),a}(n.Component)),H=Object(o.b)((function(e){return{gravatarEmail:e.player.gravatarEmail,name:e.player.name,gravatarURL:e.player.gravatarURL,score:e.player.score}}))(q),F=(a(107),a(108),function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).myInterval=function(){e.props.stopTimer&&clearInterval(e.Timer)},e.Timer=function(){},e.state={time:30},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;return this.Timer=setInterval((function(){return e.setState((function(e){return{time:e.time-1}}))}),1e3),this.Timer}},{key:"componentDidUpdate",value:function(){var e=this.state.time,t=this.props.dispatch;if(!(e>=0))return null;t(j(e)),this.myInterval()}},{key:"render",value:function(){var e=this.state.time;return r.a.createElement("div",null,e<=-1?r.a.createElement("h5",{className:"timer-text"},"0"):r.a.createElement("h5",{className:"timer-text"},e))}}]),a}(n.Component)),U=Object(o.b)()(F),Y=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={resultsQuestions:[],counter:0,allQuestions:[],correctAnswer:"",isDisabled:!0,isHidden:!0,difficulty:"",disabledBtnQuestions:!1,stopTimer:!1},e.arrayRandomOrder=function(e){for(var t=e.length-1;t>0;t-=1){var a=Math.floor(Math.random()*(t+1)),n=[e[a],e[t]];e[t]=n[0],e[a]=n[1]}return e},e.createQuestions=function(t,a){var n=-1,c=e.state.disabledBtnQuestions;return t.map((function(t){return t===a?r.a.createElement("button",{type:"button",className:"respostaCorreta button-answer","data-testid":"correct-answer",onClick:function(a){e.clickAnswer(t,a)},disabled:c,dangerouslySetInnerHTML:{__html:B()(t)}}):(n+=1,r.a.createElement("button",{type:"button",className:"incorrectAnswer button-answer","data-testid":"wrong-answer-".concat(n),onClick:function(a){e.clickAnswer(t,a)},key:n,disabled:c,dangerouslySetInnerHTML:{__html:B()(t)}}))}))},e.refreshButton=function(){e.state.counter<=4&&e.setState({isDisabled:!1,isHidden:!1})},e.clickAnswer=function(t,a){var n=e.state,r=n.correctAnswer,c=n.difficulty,s=a.target,o=document.querySelectorAll(".incorrectAnswer"),i=document.querySelector(".respostaCorreta"),l=e.props,u=l.timer,m=l.dispatch;if(t===r){console.log(i.classList),m({type:"RIGTH_QUESTIONS"}),s.classList.add("correct"),o.forEach((function(e){e.classList.add("incorrect")}));m(w(10+u*("hard"===c?3:"medium"===c?2:1)))}else i.classList.add("correct"),o.forEach((function(e){e.classList.add("incorrect")}));e.refreshButton(),e.setState({disabledBtnQuestions:!0,stopTimer:!0})},e.updateQuestions=function(){var t=e.state,a=t.resultsQuestions,n=t.counter;e.setState({correctAnswer:a[n].correct_answer,allQuestions:e.arrayRandomOrder([].concat(Object(x.a)(a[n].incorrect_answers),[a[n].correct_answer])),difficulty:a[n].difficulty})},e.clickNextQuestion=function(){var t=document.querySelectorAll(".incorrectAnswer");document.querySelector(".respostaCorreta").classList.remove("correct"),t.forEach((function(e){e.classList.remove("incorrect")}));var a=e.state.counter;(a<4&&e.setState((function(e){return{counter:e.counter+1}}),e.updateQuestions),e.setState({isDisabled:!0,isHidden:!0}),4===a)&&e.props.history.push("/feedback");e.setState({disabledBtnQuestions:!1,stopTimer:!1})},e.disableButtons=function(){e.setState({disabledBtnQuestions:!0});(0,e.props.dispatch)(j(30)),e.setState({isDisabled:!1,isHidden:!1,stopTimer:!1})},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(g.a)(y.a.mark((function e(){var t,a,n,r,c,s,o;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.token,n=t.category,r=t.type,c=t.difficulty,e.next=3,_(a,n,c,r);case 3:s=e.sent,console.log(s),o=this.state.counter,this.setState({resultsQuestions:s.results,correctAnswer:s.results[o].correct_answer,allQuestions:this.arrayRandomOrder([].concat(Object(x.a)(s.results[o].incorrect_answers),[s.results[o].correct_answer])),difficulty:s.results[o].difficulty});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=this.props.score;I("score",e)}},{key:"render",value:function(){var e=this,t=this.state,a=t.resultsQuestions,n=t.stopTimer,c=t.counter,s=t.correctAnswer,o=t.allQuestions,i=t.isDisabled,l=t.isHidden,u=this.props.timer;return r.a.createElement("section",{className:"section-game"},r.a.createElement(H,null),0===a.length?null:r.a.createElement("div",{className:"answers-div"},r.a.createElement("h2",{className:"question-category","data-testid":"question-category",dangerouslySetInnerHTML:{__html:B()(a[c].category)}}),"Dirk the Daring"===s?r.a.createElement("h3",{"data-testid":"question-text"},a[c].question):r.a.createElement("h3",{"data-testid":"question-text",dangerouslySetInnerHTML:{__html:B()(a[c].question)}}),r.a.createElement("div",{className:"answer-options","data-testid":"answer-options"},this.createQuestions(o,s))),r.a.createElement("button",{className:"next-btn",type:"button",name:"next","data-testid":"btn-next",disabled:i,hidden:l,onClick:function(){e.clickNextQuestion()}},"Next"),r.a.createElement(U,{key:c,stopTimer:n}),0===u?this.disableButtons():null)}}]),a}(r.a.Component),P=Object(o.b)((function(e){return{token:e.token,timer:e.timer,score:e.player.score,category:e.setting.category,difficulty:e.setting.difficulty,type:e.setting.type}}))(Y),J=(a(150),function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={categorys:[{name:"Choose a category..."}]},e.createSelectCategory=function(t){return console.log(t),r.a.createElement("select",{className:"settings-list",onChange:e.handleCategoryChange},t.map((function(e,t){var a=e.id,n=e.name;return r.a.createElement("option",{key:t,name:a,value:a},n)})))},e.handleCategoryChange=function(t){var a=t.target;(0,e.props.dispatch)(N(a.value))},e.handleDifficultyChange=function(t){var a=t.target;(0,e.props.dispatch)(C(a.value))},e.handleTypeChange=function(t){var a=t.target;(0,e.props.dispatch)(S(a.value))},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(g.a)(y.a.mark((function e(){var t,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R();case 2:t=e.sent,a=this.state.categorys,this.setState({categorys:[].concat(Object(x.a)(a),Object(x.a)(t.trivia_categories))});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.categorys;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"settings-h1"},"Settings"),r.a.createElement("section",{className:"settings-section"},r.a.createElement("div",{className:"settings-div"},0!==e.length?this.createSelectCategory(e):null,r.a.createElement("select",{className:"settings-list",onChange:this.handleDifficultyChange},r.a.createElement("option",{value:""},"Any Difficulty"),r.a.createElement("option",{value:"easy"},"Easy"),r.a.createElement("option",{value:"medium"},"Medium"),r.a.createElement("option",{value:"hard"},"Hard")),r.a.createElement("select",{className:"settings-list",onChange:this.handleTypeChange},r.a.createElement("option",{value:""},"Any Type"),r.a.createElement("option",{value:"multiple"},"Multiple Choice"),r.a.createElement("option",{value:"boolean"},"True/False")),r.a.createElement(i.b,{to:"/game"},r.a.createElement("button",{className:"settings-play",type:"button"},"Play")))))}}]),a}(r.a.Component)),G=Object(o.b)()(J),W=(a(154),function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).messageNumberOfQuestions=function(e){return e<3?r.a.createElement("h6",{className:"feedback-message","data-testid":"feedback-text"},"Could be better..."):e>=3?r.a.createElement("h6",{className:"feedback-message","data-testid":"feedback-text"},"Well Done!"):void 0},e.handleClick=function(){(0,e.props.dispatch)({type:"RESET_SCORE"})},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.name,a=e.score,n=e.email;!function(e){var t=JSON.parse(localStorage.getItem("ranking"));t?localStorage.setItem("ranking",JSON.stringify([].concat(Object(x.a)(t),[e]))):localStorage.setItem("ranking",JSON.stringify([e]))}({name:t,score:a,picture:"https://www.gravatar.com/avatar/".concat(T()(n))})}},{key:"render",value:function(){var e=this.props,t=e.rightQuestions,a=e.score;return r.a.createElement(r.a.Fragment,null,r.a.createElement(H,null),r.a.createElement("section",{className:"section-feedback"},r.a.createElement("h1",{className:"text-feedback-page","data-testid":"feedback-text"},"Your Score!"),r.a.createElement("div",null,r.a.createElement("h3",{className:"feedback-score","data-testid":"feedback-total-score"},a),r.a.createElement("div",{className:"assertions-div"},r.a.createElement("h4",{className:"text-number-acertos"},"Right answers: "),r.a.createElement("h4",{"data-testid":"feedback-total-question"},t)),this.messageNumberOfQuestions(t)),r.a.createElement("div",{className:"div-buttons-feedback"},r.a.createElement(i.b,{to:"/"},r.a.createElement("button",{type:"button",name:"button-play-again","data-testid":"btn-play-again",onClick:this.handleClick},"Play again")),r.a.createElement(i.b,{to:"/ranking"},r.a.createElement("button",{type:"button",name:"button-play-again","data-testid":"btn-ranking"},"Ranking")))))}}]),a}(r.a.Component)),K=Object(o.b)((function(e){return{rightQuestions:e.player.assertions,score:e.player.score,name:e.player.name,email:e.player.gravatarEmail}}))(W),$=(a(155),function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={playersArray:[]},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=JSON.parse(localStorage.getItem("ranking"));e.sort((function(e,t){return t.score-e.score})),this.setState({playersArray:e}),(0,this.props.dispatch)({type:"RESET_SCORE"})}},{key:"render",value:function(){var e=this.state.playersArray;return r.a.createElement("div",{className:"ranking-div"},r.a.createElement("h1",{className:"ranking-h1","data-testid":"ranking-title"},"Ranking"),r.a.createElement("div",{className:"ranking-div-allplayers"},0===e.length?null:e.map((function(e,t){return r.a.createElement("div",{className:"player-div",key:t},r.a.createElement("div",{className:"ranking-name-img"},r.a.createElement("img",{className:"ranking-img",src:e.picture,alt:"gravatarImg"}),r.a.createElement("h4",{className:"ranking-h4","data-testid":"player-name-".concat(t)},e.name)),r.a.createElement("h4",{className:"ranking-score","data-testid":"player-score-".concat(t)},e.score))}))),r.a.createElement(i.b,{to:"/"},r.a.createElement("button",{className:"next-btn",type:"button",name:"button-play-again","data-testid":"btn-go-home"},"Play Again!")))}}]),a}(n.Component)),z=Object(o.b)()($),V=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(d.c,null,r.a.createElement(d.a,{exact:!0,path:"/",component:L}),r.a.createElement("div",{className:"light-blue"},r.a.createElement(d.a,{path:"/game",component:P}),r.a.createElement(d.a,{path:"/settings",component:G}),r.a.createElement(d.a,{path:"/feedback",component:K}),r.a.createElement(d.a,{path:"/ranking",component:z}))))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var X=a(27),Z=a(89),ee=a(90),te={name:"",assertions:0,score:0,gravatarEmail:"",gravatarURL:""},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PLAYER_INFO":return Object(E.a)(Object(E.a)({},e),{},{name:t.payload.name,gravatarEmail:t.payload.email,gravatarURL:t.payload.gravatarURL});case"ADD_SCORE":return Object(E.a)(Object(E.a)({},e),{},{score:t.payload.score+e.score});case"RESET_SCORE":return Object(E.a)(Object(E.a)({},e),{},{score:0});case"RIGTH_QUESTIONS":return Object(E.a)(Object(E.a)({},e),{},{assertions:e.assertions+1});default:return e}},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOKEN_INFO":return t.payload;default:return e}},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TIMER":return t.payload;default:return e}},ce={category:"",difficulty:"",type:""},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_CATEGORY":return Object(E.a)(Object(E.a)({},e),{},{category:t.payload});case"ADD_DIFFICULTY":return Object(E.a)(Object(E.a)({},e),{},{difficulty:t.payload});case"ADD_TYPE":return Object(E.a)(Object(E.a)({},e),{},{type:t.payload});default:return e}},oe=Object(X.combineReducers)({player:ae,token:ne,timer:re,setting:se}),ie=Object(X.createStore)(oe,Object(Z.composeWithDevTools)(Object(X.applyMiddleware)(ee.a)));window.Cypress&&(window.store=ie);var le=ie;s.a.render(r.a.createElement(i.a,{basename:"/Trivia-Game"},r.a.createElement(o.a,{store:le},r.a.createElement(V,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},41:function(e,t,a){},50:function(e,t){},51:function(e,t){},75:function(e,t){},81:function(e,t){},87:function(e,t,a){e.exports=a.p+"static/media/trivia.466d153e.png"},91:function(e,t,a){e.exports=a(156)},96:function(e,t,a){}},[[91,1,2]]]);
//# sourceMappingURL=main.03c75eaf.chunk.js.map